{"openapi":"3.1.0","info":{"title":"Quotes Server API","description":"A simple API for managing and retrieving inspirational quotes","contact":{"name":"Chia-Wei Hsu","email":"chiawei@pdx.edu"},"license":{"name":""},"version":"0.1.0"},"paths":{"/api/v1/quotes":{"get":{"tags":["quotes"],"summary":"Get all quotes from the database","description":"Returns a list of all quotes with their associated tags.","operationId":"get_all_quotes","responses":{"200":{"description":"List of all quotes successfully retrieved","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/QuoteWithTags"}}}}},"500":{"description":"Internal server error"}}},"post":{"tags":["quotes"],"summary":"Create a new quote (requires authentication)","description":"Creates a new quote with optional tags and returns the created quote with its assigned ID.","operationId":"create_quote","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateQuoteRequest"}}},"required":true},"responses":{"201":{"description":"Quote successfully created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QuoteWithTags"}}}},"400":{"description":"Invalid request body"},"401":{"description":"Unauthorized"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/v1/quotes/random":{"get":{"tags":["quotes"],"summary":"Get a random quote from the database","description":"Returns a single random quote with its associated tags, or null if no quotes are available.","operationId":"get_random_quote","responses":{"200":{"description":"Random quote successfully retrieved","content":{"application/json":{"schema":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/QuoteWithTags"}]}}}},"500":{"description":"Internal server error"}}}},"/api/v1/quotes/{id}":{"get":{"tags":["quotes"],"summary":"Get a specific quote by ID","description":"Returns a single quote with its associated tags based on the provided ID.","operationId":"get_quote_by_id","parameters":[{"name":"id","in":"path","description":"Quote database ID","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Quote successfully retrieved","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QuoteWithTags"}}}},"404":{"description":"Quote not found"},"500":{"description":"Internal server error"}}},"put":{"tags":["quotes"],"summary":"Update an existing quote (requires authentication)","description":"Updates an existing quote by ID with new quote text, source, and tags. All existing tags are replaced with the provided ones.","operationId":"update_quote","parameters":[{"name":"id","in":"path","description":"Quote database ID to update","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateQuoteRequest"}}},"required":true},"responses":{"200":{"description":"Quote successfully updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QuoteWithTags"}}}},"400":{"description":"Invalid request body"},"401":{"description":"Unauthorized"},"404":{"description":"Quote not found"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]},"delete":{"tags":["quotes"],"summary":"Delete a quote by ID (requires authentication)","description":"Permanently removes a quote and all its associated tags from the database.","operationId":"delete_quote","parameters":[{"name":"id","in":"path","description":"Quote database ID to delete","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"204":{"description":"Quote successfully deleted"},"401":{"description":"Unauthorized"},"404":{"description":"Quote not found"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/auth":{"post":{"tags":["auth"],"summary":"User registration and authentication","description":"Authenticates a user with their credentials and returns a JWT token for accessing protected endpoints.","operationId":"register","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Registration"}}},"required":true},"responses":{"200":{"description":"User successfully authenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthBody"}}}},"400":{"description":"Invalid registration data"},"401":{"description":"Wrong credentials"},"500":{"description":"Internal server error"}}}}},"components":{"schemas":{"AuthBody":{"type":"object","description":"Authentication response body containing JWT token","required":["access_token","token_type"],"properties":{"access_token":{"type":"string"},"token_type":{"type":"string"}}},"CreateQuoteRequest":{"type":"object","required":["quote","source"],"properties":{"quote":{"type":"string","description":"The quote text","example":"The future belongs to those who believe in the beauty of their dreams."},"source":{"type":"string","description":"Source or author of the quote","example":"Eleanor Roosevelt"},"tags":{"type":["array","null"],"items":{"type":"string"},"description":"Optional list of tags for the quote","example":["dreams","future","motivation"]}}},"QuoteWithTags":{"type":"object","required":["id","quote","source","created_at","updated_at","tags"],"properties":{"created_at":{"type":"string","format":"date-time","description":"Timestamp when the quote was created","example":"2024-01-01T12:00:00Z"},"id":{"type":"integer","format":"int64","description":"Unique identifier for the quote","example":1},"quote":{"type":"string","description":"The actual quote text","example":"The only way to do great work is to love what you do."},"source":{"type":"string","description":"Source or author of the quote","example":"Steve Jobs"},"tags":{"type":"array","items":{"type":"string"},"description":"List of tags associated with the quote","example":["motivation","work","success"]},"updated_at":{"type":"string","format":"date-time","description":"Timestamp when the quote was last updated","example":"2024-01-01T12:00:00Z"}}},"Registration":{"type":"object","description":"User registration request","required":["full_name","email","password"],"properties":{"email":{"type":"string"},"full_name":{"type":"string"},"password":{"type":"string"}}},"UpdateQuoteRequest":{"type":"object","required":["quote","source"],"properties":{"quote":{"type":"string","description":"The updated quote text","example":"The future belongs to those who believe in the beauty of their dreams."},"source":{"type":"string","description":"Updated source or author of the quote","example":"Eleanor Roosevelt"},"tags":{"type":["array","null"],"items":{"type":"string"},"description":"Updated list of tags for the quote (replaces existing tags)","example":["dreams","future","motivation","inspiration"]}}}},"securitySchemes":{"bearer_auth":{"type":"http","scheme":"bearer"}}},"tags":[{"name":"quotes","description":"Quote management endpoints"},{"name":"auth","description":"Authentication endpoints"}]}